---

dist: xenial

services:
  - docker

language: python

python:
  - "3.5"
  - "3.6"
  - "3.7"

env:
  global:
    - CI_SERVER=true

install:
  - pip install pip --upgrade
  - pip install -e .
  - pip install -e '.[git]'
  - pip install -e '.[tests]'

before_script:
  - "while ! docker info; do sleep 1; done"

script:
  - ./test.sh && ./docker_tests.sh
